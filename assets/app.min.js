let activeModal=null;const xsh={setFormData(form,data){const $form=$(form);this.clearForm($form);$form.find("input, select, textarea").each(function(){const name=$(this).attr("name");if(!name)return;if($(this).is("input")||$(this).is("select")){$(this).val(data[name]).trigger("change")}else if($(this).is("textarea")){$(this).text(data[name])}})},getFormData(form){return $(form).serializeArray().reduce((acc,field)=>{acc[field.name]=field.value;return acc},{})},clearForm(form){const $form=$(form);$form.trigger("reset");$form.find("select").each(function(){$(this).val($(this).find("option:first").val()).trigger("change")})},showModal(modal){$(".modal").modal("hide");activeModal=modal;activeModal.modal("show")},hideModal(){if(activeModal)activeModal.modal("hide")},redirectTo(route,delay=0){setTimeout(()=>{window.location.href=route},delay)},refreshPage(delay=0){setTimeout(()=>{location.reload()},delay)},showNotification({message,duration=2e3,position="top-center",type="dark",callback}={}){const colorMap={success:"var(--bs-success)",warning:"var(--bs-warning)",danger:"var(--bs-dark)",primary:"var(--bs-primary)",dark:"var(--bs-dark)"};const $notification=$("<div></div>").html(`<span>${message}</span><div id="progress-bar"></div>`).css({display:"none",minWidth:"200px",position:"fixed",padding:"20px",backgroundColor:colorMap[type]||colorMap.success,color:"white",borderRadius:"5px",zIndex:9999,textAlign:position.includes("center")?"center":"left",[position.includes("top")?"top":"bottom"]:"20px",[position.includes("left")?"left":position.includes("right")?"right":"left"]:"50%",transform:position.includes("center")?"translateX(-50%)":""});const $overlay=$("<div></div>").css({position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e3});$("body").append($overlay,$notification);$notification.fadeIn(()=>$notification.find("#progress-bar").css({width:"0%"}));$notification.on("click",closeNotification);const timeoutId=setTimeout(closeNotification,duration);function closeNotification(){clearTimeout(timeoutId);$notification.fadeOut(()=>{$notification.remove();$overlay.remove();if(typeof callback==="function")callback()})}},initBaseEvents(){$(document).on("hidden.bs.modal",".modal",()=>{this.clearForm($(".modal form"))});let $activeElement=null;let originalHtml="";$(document).on({ajaxStart(event){$activeElement=$(event.target.activeElement);if($activeElement.is(":button, a")&&!$activeElement.hasClass("dropdown-item")&&!$activeElement.hasClass("nav-main-link")&&!$activeElement.hasClass("page-link")&&!$activeElement.hasClass("list-group-item")){originalHtml=$activeElement.html();$activeElement.html('<i class="fa fa-spinner fa-spin"></i>')}},ajaxStop(){if($activeElement&&originalHtml){$activeElement.html(originalHtml)}}})}};xsh.initBaseEvents();